{
  "version": 2,
  "buildCommand": "npm install --include=dev && npm run build && cd api && npm install",
  "outputDirectory": "dist",
  "routes": [
    {
      "src": "/api/health",
      "dest": "/api/health"
    },
    {
      "src": "/api/user/saved-routes-direct/([^/]+)",
      "dest": "/api/user/saved-routes-direct?routeId=$1",
      "headers": {
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, DELETE, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type, Authorization"
      }
    },
    {
      "src": "/api/user/saved-routes-direct",
      "dest": "/api/user/saved-routes-direct",
      "headers": {
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, DELETE, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type, Authorization"
      }
    },
    {
      "src": "/api/user/saved-routes/([^/]+)",
      "dest": "/api/user/saved-routes?routeId=$1",
      "headers": {
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, DELETE, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type, Authorization"
      }
    },
    {
      "src": "/api/user/saved-routes",
      "dest": "/api/user/saved-routes",
      "headers": {
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, DELETE, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type, Authorization"
      }
    },
    {
      "src": "/api/user",
      "dest": "/api/routes/user",
      "headers": {
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type, Authorization"
      }
    },
    {
      "src": "/api/gpx",
      "dest": "/api/gpx"
    },
    {
      "src": "/api/photos/upload",
      "dest": "/api/photos"
    },
    {
      "src": "/api/photos",
      "dest": "/api/photos"
    },
    {
      "src": "/api/poi",
      "dest": "/api/poi"
    },
    {
      "src": "/api/routes/chunked/(.*)",
      "dest": "/api/routes"
    },
    {
      "src": "/api/routes/embed/([^/]+)",
      "dest": "/api/routes/embed?routeId=$1",
      "headers": {
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type, Authorization"
      }
    },
    {
      "src": "/api/routes/public/([^/]+)",
      "dest": "/api/routes/public?publicId=$1"
    },
    {
      "src": "/api/routes/public",
      "dest": "/api/routes/public"
    },
    {
      "src": "/api/routes/([^/]+)",
      "dest": "/api/routes?id=$1"
    },
    {
      "src": "/api/routes",
      "dest": "/api/routes"
    },
    {
      "src": "/assets/(.*)",
      "dest": "/assets/$1"
    },
    {
      "src": "/images/(.*)",
      "dest": "/images/$1"
    },
    {
      "src": "/(.*)",
      "dest": "/"
    }
  ],
  "env": {
    "NODE_ENV": "production"
  },
  "functions": {
    "api/health/index.js": {
      "memory": 128,
      "maxDuration": 5
    },
    "api/user/saved-routes-direct.js": {
      "memory": 512,
      "maxDuration": 30
    },
    "api/user/saved-routes.js": {
      "memory": 512,
      "maxDuration": 30
    },
    "api/routes/user.js": {
      "memory": 1024,
      "maxDuration": 60
    },
    "api/user/index.js": {
      "memory": 1024,
      "maxDuration": 60
    },
    "api/gpx/index.js": {
      "memory": 1024,
      "maxDuration": 60
    },
    "api/photos/index.js": {
      "memory": 1024,
      "maxDuration": 60
    },
    "api/poi/index.js": {
      "memory": 512,
      "maxDuration": 30
    },
    "api/routes/index.js": {
      "memory": 512,
      "maxDuration": 30
    },
    "api/routes/public/index.js": {
      "memory": 512,
      "maxDuration": 30
    },
    "api/routes/embed/index.js": {
      "memory": 512,
      "maxDuration": 30
    }
  }
}
