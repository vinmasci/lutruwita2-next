ğŸ—ºï¸ Updated HomeView map with 0 styled routes. Unpaved drawn for: 0 routes.
ğŸ”„ Loading routes with filters
ğŸ”„ Filter - country: Australia
ğŸ”„ Client-side filter - minimum distance: 0.0
ğŸ”„ Fetching routes from Firebase...
ğŸ” Fetching routes with filters: Optional(["isPublic": true, "country": "Australia"])
ğŸ¬ HomeView: Easing camera to new position like EnhancedRouteMapView
ğŸ¯ RouteTypeMarker: Assigned 0 point annotations to manager.
ğŸ¯ [TAP_SETUP] Setting up layer tap handler for layer: home-map-start-end-point-manager
ğŸ¯ [TAP_SETUP] Manager exists: MapboxMaps.PointAnnotationManager, annotations count: 0
ğŸ¯ [TAP_SETUP] Style loaded: true
ğŸ—ºï¸ Updated HomeView map with 0 styled routes. Unpaved drawn for: 0 routes.
ğŸ”„ Found 6 documents to analyze
[AuthManager] Loaded latest user data from Firebase
âœ… Loaded available states: ["Canterbury", "Otago", "Tasmania", "Victoria"]
âœ… Loaded available route types: ["Bikepacking", "Event", "Single"]
âœ… Loaded available distance ranges: ["0-50", "200-500", "500+"]
ğŸ¬ HomeView: Easing camera to new position like EnhancedRouteMapView
ğŸ¯ RouteTypeMarker: Assigned 0 point annotations to manager.
ğŸ¯ [TAP_SETUP] Setting up layer tap handler for layer: home-map-start-end-point-manager
ğŸ¯ [TAP_SETUP] Manager exists: MapboxMaps.PointAnnotationManager, annotations count: 0
ğŸ¯ [TAP_SETUP] Style loaded: true
ğŸ—ºï¸ Updated HomeView map with 0 styled routes. Unpaved drawn for: 0 routes.
ğŸ¬ HomeView: Easing camera to new position like EnhancedRouteMapView
ğŸ¯ RouteTypeMarker: Assigned 0 point annotations to manager.
ğŸ¯ [TAP_SETUP] Setting up layer tap handler for layer: home-map-start-end-point-manager
ğŸ¯ [TAP_SETUP] Manager exists: MapboxMaps.PointAnnotationManager, annotations count: 0
ğŸ¯ [TAP_SETUP] Style loaded: true
ğŸ—ºï¸ Updated HomeView map with 0 styled routes. Unpaved drawn for: 0 routes.
ğŸ¬ HomeView: Easing camera to new position like EnhancedRouteMapView
ğŸ¯ RouteTypeMarker: Assigned 0 point annotations to manager.
ğŸ¯ [TAP_SETUP] Setting up layer tap handler for layer: home-map-start-end-point-manager
ğŸ¯ [TAP_SETUP] Manager exists: MapboxMaps.PointAnnotationManager, annotations count: 0
ğŸ¯ [TAP_SETUP] Style loaded: true
ğŸ—ºï¸ Updated HomeView map with 0 styled routes. Unpaved drawn for: 0 routes.
nw_connection_copy_connected_local_endpoint_block_invoke [C7] Client called nw_connection_copy_connected_local_endpoint on unconnected nw_connection
nw_connection_copy_connected_remote_endpoint_block_invoke [C7] Client called nw_connection_copy_connected_remote_endpoint on unconnected nw_connection
nw_connection_copy_protocol_metadata_internal_block_invoke [C7] Client called nw_connection_copy_protocol_metadata_internal on unconnected nw_connection
nw_connection_copy_connected_local_endpoint_block_invoke [C11] Client called nw_connection_copy_connected_local_endpoint on unconnected nw_connection
nw_connection_copy_connected_remote_endpoint_block_invoke [C11] Client called nw_connection_copy_connected_remote_endpoint on unconnected nw_connection
nw_connection_copy_protocol_metadata_internal_block_invoke [C11] Client called nw_connection_copy_protocol_metadata_internal on unconnected nw_connection
nw_connection_copy_connected_local_endpoint_block_invoke [C12] Client called nw_connection_copy_connected_local_endpoint on unconnected nw_connection
nw_connection_copy_connected_remote_endpoint_block_invoke [C12] Client called nw_connection_copy_connected_remote_endpoint on unconnected nw_connection
nw_connection_copy_protocol_metadata_internal_block_invoke [C12] Client called nw_connection_copy_protocol_metadata_internal on unconnected nw_connection
âœ… Fetched 6 routes
âœ… After distance filtering: 6 routes
ğŸ“ Route: zj3GELVpT8M3ghIs8UI6, name: Test 2, type: Single, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
ğŸ“ Route: x8gtPvzh0v8lHICTMc6v, name: Test, type: Event, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
ğŸ“ Route: lSP87JlykN0waqNgD0l3, name: The Otway Rip, type: Bikepacking, distance: 256.8km
ğŸ“ Has coordinates: lat=-38.22902, lng=143.150573
ğŸ“ Route: mPzC8y2chmMrVneOoB9o, name: Erskine Falls, type: Single, distance: 29.3km
ğŸ“ Has coordinates: lat=-38.54869, lng=143.95843
ğŸ“ Route: gmRh8B6akTWQcPG6WucU, name: Gariwerd Explorer (Grampians NP), type: Bikepacking, distance: 293.9km
ğŸ“ Has coordinates: lat=-37.28415, lng=142.93575
ğŸ“ Route: NPm5zoKKnHCqE8NKHfbt, name: NZ Sth Island Trail Mix, type: Bikepacking, distance: 632.3km
ğŸ“ Has coordinates: lat=-43.858329, lng=170.174423
âœ… Updated routes in view model
ğŸ”„ viewModel.routes changed, updating displayedRouteMarkers with 6 routes
ğŸ—ºï¸ Getting route markers for map display
ğŸ” Route: zj3GELVpT8M3ghIs8UI6, name: Test 2
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 147.32879, lat: -41.36721))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” clCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” Route: x8gtPvzh0v8lHICTMc6v, name: Test
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 147.32879, lat: -41.36721))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” clCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” Route: lSP87JlykN0waqNgD0l3, name: The Otway Rip
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 143.150573, lat: -38.22902))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-38.22902, lng=143.150573
ğŸ” clCoordinate values: lat=-38.22902, lng=143.150573
ğŸ” Route: mPzC8y2chmMrVneOoB9o, name: Erskine Falls
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 143.95843, lat: -38.54869))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-38.54869, lng=143.95843
ğŸ” clCoordinate values: lat=-38.54869, lng=143.95843
ğŸ” Route: gmRh8B6akTWQcPG6WucU, name: Gariwerd Explorer (Grampians NP)
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 142.93575, lat: -37.28415))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-37.28415, lng=142.93575
ğŸ” clCoordinate values: lat=-37.28415, lng=142.93575
ğŸ” Route: NPm5zoKKnHCqE8NKHfbt, name: NZ Sth Island Trail Mix
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 170.174423, lat: -43.858329))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-43.858329, lng=170.174423
ğŸ” clCoordinate values: lat=-43.858329, lng=170.174423
ğŸ—ºï¸ Created 6 markers from 6 routes for HomeView map
ğŸ¬ HomeView: Easing camera to new position like EnhancedRouteMapView
ğŸ” Route zj3GELVpT8M3ghIs8UI6: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route zj3GELVpT8M3ghIs8UI6 (type: Single). Image size: (32.0, 32.0)
ğŸ” Route x8gtPvzh0v8lHICTMc6v: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Event, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route x8gtPvzh0v8lHICTMc6v (type: Event). Image size: (32.0, 32.0)
ğŸ” Route lSP87JlykN0waqNgD0l3: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route lSP87JlykN0waqNgD0l3 (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ” Route mPzC8y2chmMrVneOoB9o: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route mPzC8y2chmMrVneOoB9o (type: Single). Image size: (32.0, 32.0)
ğŸ” Route gmRh8B6akTWQcPG6WucU: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route gmRh8B6akTWQcPG6WucU (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ” Route NPm5zoKKnHCqE8NKHfbt: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route NPm5zoKKnHCqE8NKHfbt (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ¯ RouteTypeMarker: Assigned 6 point annotations to manager.
ğŸ¯ [TAP_SETUP] Setting up layer tap handler for layer: home-map-start-end-point-manager
ğŸ¯ [TAP_SETUP] Manager exists: MapboxMaps.PointAnnotationManager, annotations count: 6
ğŸ¯ [TAP_SETUP] Style loaded: true
ğŸ—ºï¸ Updated HomeView map with 0 styled routes. Unpaved drawn for: 0 routes.
âœ… Fetched 6 routes
âœ… After distance filtering: 6 routes
ğŸ“ Route: zj3GELVpT8M3ghIs8UI6, name: Test 2, type: Single, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
ğŸ“ Route: x8gtPvzh0v8lHICTMc6v, name: Test, type: Event, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
ğŸ“ Route: lSP87JlykN0waqNgD0l3, name: The Otway Rip, type: Bikepacking, distance: 256.8km
ğŸ“ Has coordinates: lat=-38.22902, lng=143.150573
ğŸ“ Route: mPzC8y2chmMrVneOoB9o, name: Erskine Falls, type: Single, distance: 29.3km
ğŸ“ Has coordinates: lat=-38.54869, lng=143.95843
ğŸ“ Route: gmRh8B6akTWQcPG6WucU, name: Gariwerd Explorer (Grampians NP), type: Bikepacking, distance: 293.9km
ğŸ“ Has coordinates: lat=-37.28415, lng=142.93575
ğŸ“ Route: NPm5zoKKnHCqE8NKHfbt, name: NZ Sth Island Trail Mix, type: Bikepacking, distance: 632.3km
ğŸ“ Has coordinates: lat=-43.858329, lng=170.174423
âœ… Updated routes in view model
âœ… Fetched 6 routes
âœ… After distance filtering: 6 routes
ğŸ“ Route: zj3GELVpT8M3ghIs8UI6, name: Test 2, type: Single, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
ğŸ“ Route: x8gtPvzh0v8lHICTMc6v, name: Test, type: Event, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
ğŸ“ Route: lSP87JlykN0waqNgD0l3, name: The Otway Rip, type: Bikepacking, distance: 256.8km
ğŸ“ Has coordinates: lat=-38.22902, lng=143.150573
ğŸ“ Route: mPzC8y2chmMrVneOoB9o, name: Erskine Falls, type: Single, distance: 29.3km
ğŸ“ Has coordinates: lat=-38.54869, lng=143.95843
ğŸ“ Route: gmRh8B6akTWQcPG6WucU, name: Gariwerd Explorer (Grampians NP), type: Bikepacking, distance: 293.9km
ğŸ“ Has coordinates: lat=-37.28415, lng=142.93575
ğŸ“ Route: NPm5zoKKnHCqE8NKHfbt, name: NZ Sth Island Trail Mix, type: Bikepacking, distance: 632.3km
ğŸ“ Has coordinates: lat=-43.858329, lng=170.174423
âœ… Updated routes in view model
âœ… Fetched 6 routes
âœ… After distance filtering: 6 routes
ğŸ“ Route: zj3GELVpT8M3ghIs8UI6, name: Test 2, type: Single, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
ğŸ“ Route: x8gtPvzh0v8lHICTMc6v, name: Test, type: Event, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
ğŸ“ Route: lSP87JlykN0waqNgD0l3, name: The Otway Rip, type: Bikepacking, distance: 256.8km
ğŸ“ Has coordinates: lat=-38.22902, lng=143.150573
ğŸ“ Route: mPzC8y2chmMrVneOoB9o, name: Erskine Falls, type: Single, distance: 29.3km
ğŸ“ Has coordinates: lat=-38.54869, lng=143.95843
ğŸ“ Route: gmRh8B6akTWQcPG6WucU, name: Gariwerd Explorer (Grampians NP), type: Bikepacking, distance: 293.9km
ğŸ“ Has coordinates: lat=-37.28415, lng=142.93575
ğŸ“ Route: NPm5zoKKnHCqE8NKHfbt, name: NZ Sth Island Trail Mix, type: Bikepacking, distance: 632.3km
ğŸ“ Has coordinates: lat=-43.858329, lng=170.174423
âœ… Updated routes in view model
âœ… Fetched 6 routes
âœ… After distance filtering: 6 routes
ğŸ“ Route: zj3GELVpT8M3ghIs8UI6, name: Test 2, type: Single, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
ğŸ“ Route: x8gtPvzh0v8lHICTMc6v, name: Test, type: Event, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
ğŸ“ Route: lSP87JlykN0waqNgD0l3, name: The Otway Rip, type: Bikepacking, distance: 256.8km
ğŸ“ Has coordinates: lat=-38.22902, lng=143.150573
ğŸ“ Route: mPzC8y2chmMrVneOoB9o, name: Erskine Falls, type: Single, distance: 29.3km
ğŸ“ Has coordinates: lat=-38.54869, lng=143.95843
ğŸ“ Route: gmRh8B6akTWQcPG6WucU, name: Gariwerd Explorer (Grampians NP), type: Bikepacking, distance: 293.9km
ğŸ“ Has coordinates: lat=-37.28415, lng=142.93575
ğŸ“ Route: NPm5zoKKnHCqE8NKHfbt, name: NZ Sth Island Trail Mix, type: Bikepacking, distance: 632.3km
ğŸ“ Has coordinates: lat=-43.858329, lng=170.174423
âœ… Updated routes in view model
ğŸ‘† [LAYER_TAP] Layer tap detected on home-map-start-end-point-manager
ğŸ‘† [LAYER_TAP] Feature ID: zj3GELVpT8M3ghIs8UI6
ğŸ‘† [LAYER_TAP] Feature properties: ["custom_data": Optional(Turf.JSONValue.object(["routeId": Optional(Turf.JSONValue.string("zj3GELVpT8M3ghIs8UI6")), "name": Optional(Turf.JSONValue.string("Test 2"))])), "layerProperties": Optional(Turf.JSONValue.object(["icon-anchor": Optional(Turf.JSONValue.string("center")), "icon-image": Optional(Turf.JSONValue.string("route-type-marker-zj3GELVpT8M3ghIs8UI6"))]))]
ğŸ‘† [LAYER_TAP] Found route ID from feature ID: zj3GELVpT8M3ghIs8UI6
ğŸ‘† [LAYER_TAP] Posting notification with coordinate: (-41.367, 147.329)
ğŸ“± [MARKER_TAP] Received notification for tapped route: zj3GELVpT8M3ghIs8UI6
ğŸ“± [MARKER_TAP] Notification userInfo: [AnyHashable("routeId"): "zj3GELVpT8M3ghIs8UI6", AnyHashable("coordinate"): (-41.367, 147.329)]
ğŸ“± [MARKER_TAP] Found route: Test 2
ğŸ“± [MARKER_TAP] Using coordinate from notification: (-41.367, 147.329)
ğŸ“± [MARKER_TAP] Setting isMarkerInteraction = true to prevent region camera changes
Publishing changes from background threads is not allowed; make sure to publish values from the main thread (via operators like receive(on:)) on model updates.
Publishing changes from background threads is not allowed; make sure to publish values from the main thread (via operators like receive(on:)) on model updates.
Publishing changes from background threads is not allowed; make sure to publish values from the main thread (via operators like receive(on:)) on model updates.
Publishing changes from background threads is not allowed; make sure to publish values from the main thread (via operators like receive(on:)) on model updates.
ğŸ“± [MARKER_TAP] Loading full route coordinates for zj3GELVpT8M3ghIs8UI6
ğŸ”„ Loading full route coordinates for route: zj3GELVpT8M3ghIs8UI6
âœ… Found 1 route segments
ğŸ” Processing segment with routeId: route-955ee5f7-4b8c-4710-a04a-f38fe2307395
âœ… Found 129 coordinates for segment route-955ee5f7-4b8c-4710-a04a-f38fe2307395
âœ… Loaded 1 coordinate segments for route zj3GELVpT8M3ghIs8UI6
âœ… Updated route zj3GELVpT8M3ghIs8UI6 with 1 coordinate segments
ğŸ”„ viewModel.routes changed, updating displayedRouteMarkers with 6 routes
ğŸ—ºï¸ Getting route markers for map display
ğŸ” Route: zj3GELVpT8M3ghIs8UI6, name: Test 2
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 147.32879, lat: -41.36721))
ğŸ” routeCoordinates count: 1
ğŸ” startCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” clCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” Route: x8gtPvzh0v8lHICTMc6v, name: Test
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 147.32879, lat: -41.36721))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” clCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” Route: lSP87JlykN0waqNgD0l3, name: The Otway Rip
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 143.150573, lat: -38.22902))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-38.22902, lng=143.150573
ğŸ” clCoordinate values: lat=-38.22902, lng=143.150573
ğŸ” Route: mPzC8y2chmMrVneOoB9o, name: Erskine Falls
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 143.95843, lat: -38.54869))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-38.54869, lng=143.95843
ğŸ” clCoordinate values: lat=-38.54869, lng=143.95843
ğŸ” Route: gmRh8B6akTWQcPG6WucU, name: Gariwerd Explorer (Grampians NP)
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 142.93575, lat: -37.28415))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-37.28415, lng=142.93575
ğŸ” clCoordinate values: lat=-37.28415, lng=142.93575
ğŸ” Route: NPm5zoKKnHCqE8NKHfbt, name: NZ Sth Island Trail Mix
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 170.174423, lat: -43.858329))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-43.858329, lng=170.174423
ğŸ” clCoordinate values: lat=-43.858329, lng=170.174423
ğŸ—ºï¸ Created 6 markers from 6 routes for HomeView map
ğŸ¬ HomeView: Easing camera to new position like EnhancedRouteMapView
ğŸ” Route zj3GELVpT8M3ghIs8UI6: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route zj3GELVpT8M3ghIs8UI6 (type: Single). Image size: (32.0, 32.0)
ğŸ” Found 1 unpaved sections to display on map for route: Test 2
ğŸ—ºï¸ Processing unpaved section 1 for route Test 2 with 75 explicit coordinates
âœ… UNPAVED: Executing addLayersAction immediately for route Test 2
âœ… UNPAVED: Executing addLayersAction for 1 features for route: Test 2
ğŸ” UNPAVED: Converting 1 GeoJSON features to 1 Turf features for route: Test 2
âœ… Source 'unpaved-source-zj3GELVpT8M3ghIs8UI6' added successfully for route: Test 2
âœ… Layer 'unpaved-layer-zj3GELVpT8M3ghIs8UI6' added successfully for route: Test 2
ğŸ—ºï¸ Added 1 unpaved sections to the map for route: Test 2
ğŸ” Route x8gtPvzh0v8lHICTMc6v: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Event, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route x8gtPvzh0v8lHICTMc6v (type: Event). Image size: (32.0, 32.0)
ğŸ” Route lSP87JlykN0waqNgD0l3: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route lSP87JlykN0waqNgD0l3 (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ” Route mPzC8y2chmMrVneOoB9o: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route mPzC8y2chmMrVneOoB9o (type: Single). Image size: (32.0, 32.0)
ğŸ” Route gmRh8B6akTWQcPG6WucU: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route gmRh8B6akTWQcPG6WucU (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ” Route NPm5zoKKnHCqE8NKHfbt: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route NPm5zoKKnHCqE8NKHfbt (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ¯ RouteTypeMarker: Assigned 6 point annotations to manager.
ğŸ¯ [TAP_SETUP] Setting up layer tap handler for layer: home-map-start-end-point-manager
ğŸ¯ [TAP_SETUP] Manager exists: MapboxMaps.PointAnnotationManager, annotations count: 6
ğŸ¯ [TAP_SETUP] Style loaded: true
ğŸ—ºï¸ Updated HomeView map with 1 styled routes. Unpaved drawn for: 1 routes.
ğŸ“± [MARKER_TAP] Calling centerCameraOnMarker with coordinate: (-41.367, 147.329)
ğŸ¯ [CAMERA_POI_STYLE] Using EXACT same approach as working POI markers
ğŸ¯ [CAMERA_POI_STYLE] Setting cameraPosition like POI markers do
ğŸ¬ [CAMERA_ASSIGNMENT] Setting camera from MARKER TAP
ğŸ¯ [CAMERA_POI_STYLE] Done - should work like POI markers
ğŸ“± [MARKER_TAP] Setting isMarkerInteraction = false to re-enable region camera changes
ğŸ¬ HomeView: Easing camera to new position like EnhancedRouteMapView
ğŸ” Route zj3GELVpT8M3ghIs8UI6: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route zj3GELVpT8M3ghIs8UI6 (type: Single). Image size: (32.0, 32.0)
ğŸ” Found 1 unpaved sections to display on map for route: Test 2
ğŸ—ºï¸ Processing unpaved section 1 for route Test 2 with 75 explicit coordinates
âœ… UNPAVED: Executing addLayersAction immediately for route Test 2
âœ… UNPAVED: Executing addLayersAction for 1 features for route: Test 2
ğŸ” UNPAVED: Converting 1 GeoJSON features to 1 Turf features for route: Test 2
âœ… Source 'unpaved-source-zj3GELVpT8M3ghIs8UI6' added successfully for route: Test 2
âœ… Layer 'unpaved-layer-zj3GELVpT8M3ghIs8UI6' added successfully for route: Test 2
ğŸ—ºï¸ Added 1 unpaved sections to the map for route: Test 2
ğŸ” Route x8gtPvzh0v8lHICTMc6v: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Event, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route x8gtPvzh0v8lHICTMc6v (type: Event). Image size: (32.0, 32.0)
ğŸ” Route lSP87JlykN0waqNgD0l3: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route lSP87JlykN0waqNgD0l3 (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ” Route mPzC8y2chmMrVneOoB9o: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route mPzC8y2chmMrVneOoB9o (type: Single). Image size: (32.0, 32.0)
ğŸ” Route gmRh8B6akTWQcPG6WucU: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route gmRh8B6akTWQcPG6WucU (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ” Route NPm5zoKKnHCqE8NKHfbt: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route NPm5zoKKnHCqE8NKHfbt (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ¯ RouteTypeMarker: Assigned 6 point annotations to manager.
ğŸ¯ [TAP_SETUP] Setting up layer tap handler for layer: home-map-start-end-point-manager
ğŸ¯ [TAP_SETUP] Manager exists: MapboxMaps.PointAnnotationManager, annotations count: 6
ğŸ¯ [TAP_SETUP] Style loaded: true
ğŸ—ºï¸ Updated HomeView map with 1 styled routes. Unpaved drawn for: 1 routes.
[Info, tile_store]: Searching for stray files to clean up
[Info, tile_store]: Cleanup of stray partial downloads complete
[Info, tile_store]: Searching for stale partial downloads to clean up
[Info, tile_store]: Cleanup of stray partial downloads complete
ğŸ—ºï¸ Resetting camera to country region: Australia
ğŸ—ºï¸ State region changed to: Tasmania. Updating camera.
ğŸ¬ [CAMERA_ASSIGNMENT] Setting camera from STATE REGION CHANGE
ğŸ¬ HomeView: Easing camera to new position like EnhancedRouteMapView
ğŸ” Route zj3GELVpT8M3ghIs8UI6: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route zj3GELVpT8M3ghIs8UI6 (type: Single). Image size: (32.0, 32.0)
ğŸ” Found 1 unpaved sections to display on map for route: Test 2
ğŸ—ºï¸ Processing unpaved section 1 for route Test 2 with 75 explicit coordinates
âœ… UNPAVED: Executing addLayersAction immediately for route Test 2
âœ… UNPAVED: Executing addLayersAction for 1 features for route: Test 2
ğŸ” UNPAVED: Converting 1 GeoJSON features to 1 Turf features for route: Test 2
âœ… Source 'unpaved-source-zj3GELVpT8M3ghIs8UI6' added successfully for route: Test 2
âœ… Layer 'unpaved-layer-zj3GELVpT8M3ghIs8UI6' added successfully for route: Test 2
ğŸ—ºï¸ Added 1 unpaved sections to the map for route: Test 2
ğŸ” Route x8gtPvzh0v8lHICTMc6v: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Event, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route x8gtPvzh0v8lHICTMc6v (type: Event). Image size: (32.0, 32.0)
ğŸ” Route lSP87JlykN0waqNgD0l3: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route lSP87JlykN0waqNgD0l3 (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ” Route mPzC8y2chmMrVneOoB9o: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route mPzC8y2chmMrVneOoB9o (type: Single). Image size: (32.0, 32.0)
ğŸ” Route gmRh8B6akTWQcPG6WucU: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route gmRh8B6akTWQcPG6WucU (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ” Route NPm5zoKKnHCqE8NKHfbt: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route NPm5zoKKnHCqE8NKHfbt (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ¯ RouteTypeMarker: Assigned 6 point annotations to manager.
ğŸ¯ [TAP_SETUP] Setting up layer tap handler for layer: home-map-start-end-point-manager
ğŸ¯ [TAP_SETUP] Manager exists: MapboxMaps.PointAnnotationManager, annotations count: 6
ğŸ¯ [TAP_SETUP] Style loaded: true
ğŸ—ºï¸ Updated HomeView map with 1 styled routes. Unpaved drawn for: 1 routes.
ğŸ”„ Loading routes with filters
ğŸ”„ Filter - country: Australia
ğŸ”„ Filter - state: TAS
ğŸ”„ Client-side filter - minimum distance: 0.0
ğŸ”„ Fetching routes from Firebase...
ğŸ” Fetching routes with filters: Optional(["state": "TAS", "isPublic": true, "country": "Australia"])
ğŸ¬ HomeView: Easing camera to new position like EnhancedRouteMapView
ğŸ” Route zj3GELVpT8M3ghIs8UI6: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route zj3GELVpT8M3ghIs8UI6 (type: Single). Image size: (32.0, 32.0)
ğŸ” Found 1 unpaved sections to display on map for route: Test 2
ğŸ—ºï¸ Processing unpaved section 1 for route Test 2 with 75 explicit coordinates
âœ… UNPAVED: Executing addLayersAction immediately for route Test 2
âœ… UNPAVED: Executing addLayersAction for 1 features for route: Test 2
ğŸ” UNPAVED: Converting 1 GeoJSON features to 1 Turf features for route: Test 2
âœ… Source 'unpaved-source-zj3GELVpT8M3ghIs8UI6' added successfully for route: Test 2
âœ… Layer 'unpaved-layer-zj3GELVpT8M3ghIs8UI6' added successfully for route: Test 2
ğŸ—ºï¸ Added 1 unpaved sections to the map for route: Test 2
ğŸ” Route x8gtPvzh0v8lHICTMc6v: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Event, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route x8gtPvzh0v8lHICTMc6v (type: Event). Image size: (32.0, 32.0)
ğŸ” Route lSP87JlykN0waqNgD0l3: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route lSP87JlykN0waqNgD0l3 (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ” Route mPzC8y2chmMrVneOoB9o: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route mPzC8y2chmMrVneOoB9o (type: Single). Image size: (32.0, 32.0)
ğŸ” Route gmRh8B6akTWQcPG6WucU: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route gmRh8B6akTWQcPG6WucU (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ” Route NPm5zoKKnHCqE8NKHfbt: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route NPm5zoKKnHCqE8NKHfbt (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ¯ RouteTypeMarker: Assigned 6 point annotations to manager.
ğŸ¯ [TAP_SETUP] Setting up layer tap handler for layer: home-map-start-end-point-manager
ğŸ¯ [TAP_SETUP] Manager exists: MapboxMaps.PointAnnotationManager, annotations count: 6
ğŸ¯ [TAP_SETUP] Style loaded: true
ğŸ—ºï¸ Updated HomeView map with 1 styled routes. Unpaved drawn for: 1 routes.
ğŸ” Route zj3GELVpT8M3ghIs8UI6 matches state filter: states ["Tasmania"] contain 'TAS' or 'Tasmania'
ğŸ” Route x8gtPvzh0v8lHICTMc6v matches state filter: states ["Tasmania"] contain 'TAS' or 'Tasmania'
ğŸ” Skipping route lSP87JlykN0waqNgD0l3: states ["Victoria"] don't match requested 'TAS' or 'Tasmania'
ğŸ” Skipping route mPzC8y2chmMrVneOoB9o: states ["Victoria"] don't match requested 'TAS' or 'Tasmania'
ğŸ” Skipping route gmRh8B6akTWQcPG6WucU: states ["Victoria"] don't match requested 'TAS' or 'Tasmania'
ğŸ” Skipping route NPm5zoKKnHCqE8NKHfbt: states ["Canterbury", "Otago"] don't match requested 'TAS' or 'Tasmania'
âœ… Fetched 2 routes
âœ… After distance filtering: 2 routes
ğŸ“ Route: zj3GELVpT8M3ghIs8UI6, name: Test 2, type: Single, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
ğŸ“ Route: x8gtPvzh0v8lHICTMc6v, name: Test, type: Event, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
âœ… Updated routes in view model
ğŸ”„ viewModel.routes changed, updating displayedRouteMarkers with 2 routes
ğŸ—ºï¸ Getting route markers for map display
ğŸ” Route: zj3GELVpT8M3ghIs8UI6, name: Test 2
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 147.32879, lat: -41.36721))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” clCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” Route: x8gtPvzh0v8lHICTMc6v, name: Test
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 147.32879, lat: -41.36721))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” clCoordinate values: lat=-41.36721, lng=147.32879
ğŸ—ºï¸ Created 2 markers from 2 routes for HomeView map
ğŸ¬ HomeView: Easing camera to new position like EnhancedRouteMapView
ğŸ” Route zj3GELVpT8M3ghIs8UI6: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route zj3GELVpT8M3ghIs8UI6 (type: Single). Image size: (32.0, 32.0)
ğŸ” Route x8gtPvzh0v8lHICTMc6v: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Event, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route x8gtPvzh0v8lHICTMc6v (type: Event). Image size: (32.0, 32.0)
ğŸ¯ RouteTypeMarker: Assigned 2 point annotations to manager.
ğŸ¯ [TAP_SETUP] Setting up layer tap handler for layer: home-map-start-end-point-manager
ğŸ¯ [TAP_SETUP] Manager exists: MapboxMaps.PointAnnotationManager, annotations count: 2
ğŸ¯ [TAP_SETUP] Style loaded: true
ğŸ—ºï¸ Updated HomeView map with 0 styled routes. Unpaved drawn for: 0 routes.
[Warning, maps-core]: {}[Style]: Required image 'route-type-marker-gmRh8B6akTWQcPG6WucU' is missing and it will not be rendered. Subscribe to StyleImageMissing event to be aware of the required missing images and add them by calling addStyleImage().
[Warning, maps-core]: {}[Style]: Required image 'route-type-marker-mPzC8y2chmMrVneOoB9o' is missing and it will not be rendered. Subscribe to StyleImageMissing event to be aware of the required missing images and add them by calling addStyleImage().
[Warning, maps-core]: {}[Style]: Required image 'route-type-marker-lSP87JlykN0waqNgD0l3' is missing and it will not be rendered. Subscribe to StyleImageMissing event to be aware of the required missing images and add them by calling addStyleImage().
[Warning, maps-core]: {}[Style]: Required image 'route-type-marker-NPm5zoKKnHCqE8NKHfbt' is missing and it will not be rendered. Subscribe to StyleImageMissing event to be aware of the required missing images and add them by calling addStyleImage().
ğŸ”„ Loading routes with filters
ğŸ”„ Filter - country: Australia
ğŸ”„ Filter - state: TAS
ğŸ”„ Client-side filter - minimum distance: 0.0
ğŸ”„ Fetching routes from Firebase...
ğŸ” Fetching routes with filters: Optional(["isPublic": true, "state": "TAS", "country": "Australia"])
ğŸ” Route zj3GELVpT8M3ghIs8UI6 matches state filter: states ["Tasmania"] contain 'TAS' or 'Tasmania'
ğŸ” Route x8gtPvzh0v8lHICTMc6v matches state filter: states ["Tasmania"] contain 'TAS' or 'Tasmania'
ğŸ—ºï¸ State region cleared. Reverting to country: Australia.
ğŸ¬ [CAMERA_ASSIGNMENT] Setting camera from STATE REGION CLEARED
ğŸ¬ HomeView: Easing camera to new position like EnhancedRouteMapView
ğŸ” Route zj3GELVpT8M3ghIs8UI6: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route zj3GELVpT8M3ghIs8UI6 (type: Single). Image size: (32.0, 32.0)
ğŸ” Route x8gtPvzh0v8lHICTMc6v: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Event, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route x8gtPvzh0v8lHICTMc6v (type: Event). Image size: (32.0, 32.0)
ğŸ¯ RouteTypeMarker: Assigned 2 point annotations to manager.
ğŸ¯ [TAP_SETUP] Setting up layer tap handler for layer: home-map-start-end-point-manager
ğŸ¯ [TAP_SETUP] Manager exists: MapboxMaps.PointAnnotationManager, annotations count: 2
ğŸ¯ [TAP_SETUP] Style loaded: true
ğŸ—ºï¸ Updated HomeView map with 0 styled routes. Unpaved drawn for: 0 routes.
ğŸ” Skipping route lSP87JlykN0waqNgD0l3: states ["Victoria"] don't match requested 'TAS' or 'Tasmania'
ğŸ” Skipping route mPzC8y2chmMrVneOoB9o: states ["Victoria"] don't match requested 'TAS' or 'Tasmania'
ğŸ” Skipping route gmRh8B6akTWQcPG6WucU: states ["Victoria"] don't match requested 'TAS' or 'Tasmania'
ğŸ” Skipping route NPm5zoKKnHCqE8NKHfbt: states ["Canterbury", "Otago"] don't match requested 'TAS' or 'Tasmania'
âœ… Fetched 2 routes
âœ… After distance filtering: 2 routes
ğŸ“ Route: zj3GELVpT8M3ghIs8UI6, name: Test 2, type: Single, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
ğŸ“ Route: x8gtPvzh0v8lHICTMc6v, name: Test, type: Event, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
âœ… Updated routes in view model
ğŸ¬ HomeView: Easing camera to new position like EnhancedRouteMapView
ğŸ” Route zj3GELVpT8M3ghIs8UI6: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route zj3GELVpT8M3ghIs8UI6 (type: Single). Image size: (32.0, 32.0)
ğŸ” Route x8gtPvzh0v8lHICTMc6v: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Event, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route x8gtPvzh0v8lHICTMc6v (type: Event). Image size: (32.0, 32.0)
ğŸ¯ RouteTypeMarker: Assigned 2 point annotations to manager.
ğŸ¯ [TAP_SETUP] Setting up layer tap handler for layer: home-map-start-end-point-manager
ğŸ¯ [TAP_SETUP] Manager exists: MapboxMaps.PointAnnotationManager, annotations count: 2
ğŸ¯ [TAP_SETUP] Style loaded: true
ğŸ—ºï¸ Updated HomeView map with 0 styled routes. Unpaved drawn for: 0 routes.
ğŸ”„ Updated available states for Australia: ["TAS", "VIC", "NSW", "QLD", "SA", "WA", "NT", "ACT"]
ğŸ”„ Loading routes with filters
ğŸ”„ Filter - country: Australia
ğŸ”„ Client-side filter - minimum distance: 0.0
ğŸ”„ Fetching routes from Firebase...
ğŸ” Fetching routes with filters: Optional(["isPublic": true, "country": "Australia"])
ğŸ”„ Loading routes with filters
ğŸ”„ Filter - country: Australia
ğŸ”„ Client-side filter - minimum distance: 0.0
ğŸ”„ Fetching routes from Firebase...
ğŸ” Fetching routes with filters: Optional(["isPublic": true, "country": "Australia"])
âœ… Fetched 6 routes
âœ… After distance filtering: 6 routes
ğŸ“ Route: zj3GELVpT8M3ghIs8UI6, name: Test 2, type: Single, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
ğŸ“ Route: x8gtPvzh0v8lHICTMc6v, name: Test, type: Event, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
ğŸ“ Route: lSP87JlykN0waqNgD0l3, name: The Otway Rip, type: Bikepacking, distance: 256.8km
ğŸ“ Has coordinates: lat=-38.22902, lng=143.150573
ğŸ“ Route: mPzC8y2chmMrVneOoB9o, name: Erskine Falls, type: Single, distance: 29.3km
ğŸ“ Has coordinates: lat=-38.54869, lng=143.95843
ğŸ“ Route: gmRh8B6akTWQcPG6WucU, name: Gariwerd Explorer (Grampians NP), type: Bikepacking, distance: 293.9km
ğŸ“ Has coordinates: lat=-37.28415, lng=142.93575
ğŸ“ Route: NPm5zoKKnHCqE8NKHfbt, name: NZ Sth Island Trail Mix, type: Bikepacking, distance: 632.3km
ğŸ“ Has coordinates: lat=-43.858329, lng=170.174423
âœ… Updated routes in view model
ğŸ”„ viewModel.routes changed, updating displayedRouteMarkers with 6 routes
ğŸ—ºï¸ Getting route markers for map display
ğŸ” Route: zj3GELVpT8M3ghIs8UI6, name: Test 2
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 147.32879, lat: -41.36721))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” clCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” Route: x8gtPvzh0v8lHICTMc6v, name: Test
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 147.32879, lat: -41.36721))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” clCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” Route: lSP87JlykN0waqNgD0l3, name: The Otway Rip
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 143.150573, lat: -38.22902))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-38.22902, lng=143.150573
ğŸ” clCoordinate values: lat=-38.22902, lng=143.150573
ğŸ” Route: mPzC8y2chmMrVneOoB9o, name: Erskine Falls
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 143.95843, lat: -38.54869))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-38.54869, lng=143.95843
ğŸ” clCoordinate values: lat=-38.54869, lng=143.95843
ğŸ” Route: gmRh8B6akTWQcPG6WucU, name: Gariwerd Explorer (Grampians NP)
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 142.93575, lat: -37.28415))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-37.28415, lng=142.93575
ğŸ” clCoordinate values: lat=-37.28415, lng=142.93575
ğŸ” Route: NPm5zoKKnHCqE8NKHfbt, name: NZ Sth Island Trail Mix
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 170.174423, lat: -43.858329))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-43.858329, lng=170.174423
ğŸ” clCoordinate values: lat=-43.858329, lng=170.174423
ğŸ—ºï¸ Created 6 markers from 6 routes for HomeView map
ğŸ¬ HomeView: Easing camera to new position like EnhancedRouteMapView
ğŸ” Route zj3GELVpT8M3ghIs8UI6: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route zj3GELVpT8M3ghIs8UI6 (type: Single). Image size: (32.0, 32.0)
ğŸ” Route x8gtPvzh0v8lHICTMc6v: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Event, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route x8gtPvzh0v8lHICTMc6v (type: Event). Image size: (32.0, 32.0)
ğŸ” Route lSP87JlykN0waqNgD0l3: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route lSP87JlykN0waqNgD0l3 (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ” Route mPzC8y2chmMrVneOoB9o: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route mPzC8y2chmMrVneOoB9o (type: Single). Image size: (32.0, 32.0)
ğŸ” Route gmRh8B6akTWQcPG6WucU: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route gmRh8B6akTWQcPG6WucU (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ” Route NPm5zoKKnHCqE8NKHfbt: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route NPm5zoKKnHCqE8NKHfbt (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ¯ RouteTypeMarker: Assigned 6 point annotations to manager.
ğŸ¯ [TAP_SETUP] Setting up layer tap handler for layer: home-map-start-end-point-manager
ğŸ¯ [TAP_SETUP] Manager exists: MapboxMaps.PointAnnotationManager, annotations count: 6
ğŸ¯ [TAP_SETUP] Style loaded: true
ğŸ—ºï¸ Updated HomeView map with 0 styled routes. Unpaved drawn for: 0 routes.
âœ… Fetched 6 routes
âœ… After distance filtering: 6 routes
ğŸ“ Route: zj3GELVpT8M3ghIs8UI6, name: Test 2, type: Single, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
ğŸ“ Route: x8gtPvzh0v8lHICTMc6v, name: Test, type: Event, distance: 7.3km
ğŸ“ Has coordinates: lat=-41.36721, lng=147.32879
ğŸ“ Route: lSP87JlykN0waqNgD0l3, name: The Otway Rip, type: Bikepacking, distance: 256.8km
ğŸ“ Has coordinates: lat=-38.22902, lng=143.150573
ğŸ“ Route: mPzC8y2chmMrVneOoB9o, name: Erskine Falls, type: Single, distance: 29.3km
ğŸ“ Has coordinates: lat=-38.54869, lng=143.95843
ğŸ“ Route: gmRh8B6akTWQcPG6WucU, name: Gariwerd Explorer (Grampians NP), type: Bikepacking, distance: 293.9km
ğŸ“ Has coordinates: lat=-37.28415, lng=142.93575
ğŸ“ Route: NPm5zoKKnHCqE8NKHfbt, name: NZ Sth Island Trail Mix, type: Bikepacking, distance: 632.3km
ğŸ“ Has coordinates: lat=-43.858329, lng=170.174423
âœ… Updated routes in view model
ğŸ‘† [GENERAL_TAP] Map tapped at coordinate: (-43.769, 145.477)
ğŸ‘† [LAYER_TAP] Layer tap detected on home-map-start-end-point-manager
ğŸ‘† [LAYER_TAP] Feature ID: zj3GELVpT8M3ghIs8UI6
ğŸ‘† [LAYER_TAP] Feature properties: ["layerProperties": Optional(Turf.JSONValue.object(["icon-anchor": Optional(Turf.JSONValue.string("center")), "icon-image": Optional(Turf.JSONValue.string("route-type-marker-zj3GELVpT8M3ghIs8UI6"))])), "custom_data": Optional(Turf.JSONValue.object(["routeId": Optional(Turf.JSONValue.string("zj3GELVpT8M3ghIs8UI6")), "name": Optional(Turf.JSONValue.string("Test 2"))]))]
ğŸ‘† [LAYER_TAP] Found route ID from feature ID: zj3GELVpT8M3ghIs8UI6
ğŸ‘† [LAYER_TAP] Posting notification with coordinate: (-41.367, 147.329)
ğŸ“± [MARKER_TAP] Received notification for tapped route: zj3GELVpT8M3ghIs8UI6
ğŸ“± [MARKER_TAP] Notification userInfo: [AnyHashable("routeId"): "zj3GELVpT8M3ghIs8UI6", AnyHashable("coordinate"): (-41.367, 147.329)]
ğŸ“± [MARKER_TAP] Found route: Test 2
ğŸ“± [MARKER_TAP] Using coordinate from notification: (-41.367, 147.329)
ğŸ“± [MARKER_TAP] Setting isMarkerInteraction = true to prevent region camera changes
Publishing changes from background threads is not allowed; make sure to publish values from the main thread (via operators like receive(on:)) on model updates.
Publishing changes from background threads is not allowed; make sure to publish values from the main thread (via operators like receive(on:)) on model updates.
Publishing changes from background threads is not allowed; make sure to publish values from the main thread (via operators like receive(on:)) on model updates.
Publishing changes from background threads is not allowed; make sure to publish values from the main thread (via operators like receive(on:)) on model updates.
ğŸ“± [MARKER_TAP] Loading full route coordinates for zj3GELVpT8M3ghIs8UI6
ğŸ”„ Loading full route coordinates for route: zj3GELVpT8M3ghIs8UI6
âœ… Found 1 route segments
ğŸ” Processing segment with routeId: route-955ee5f7-4b8c-4710-a04a-f38fe2307395
âœ… Found 129 coordinates for segment route-955ee5f7-4b8c-4710-a04a-f38fe2307395
âœ… Loaded 1 coordinate segments for route zj3GELVpT8M3ghIs8UI6
âœ… Updated route zj3GELVpT8M3ghIs8UI6 with 1 coordinate segments
ğŸ”„ viewModel.routes changed, updating displayedRouteMarkers with 6 routes
ğŸ—ºï¸ Getting route markers for map display
ğŸ” Route: zj3GELVpT8M3ghIs8UI6, name: Test 2
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 147.32879, lat: -41.36721))
ğŸ” routeCoordinates count: 1
ğŸ” startCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” clCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” Route: x8gtPvzh0v8lHICTMc6v, name: Test
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 147.32879, lat: -41.36721))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” clCoordinate values: lat=-41.36721, lng=147.32879
ğŸ” Route: lSP87JlykN0waqNgD0l3, name: The Otway Rip
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 143.150573, lat: -38.22902))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-38.22902, lng=143.150573
ğŸ” clCoordinate values: lat=-38.22902, lng=143.150573
ğŸ” Route: mPzC8y2chmMrVneOoB9o, name: Erskine Falls
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 143.95843, lat: -38.54869))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-38.54869, lng=143.95843
ğŸ” clCoordinate values: lat=-38.54869, lng=143.95843
ğŸ” Route: gmRh8B6akTWQcPG6WucU, name: Gariwerd Explorer (Grampians NP)
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 142.93575, lat: -37.28415))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-37.28415, lng=142.93575
ğŸ” clCoordinate values: lat=-37.28415, lng=142.93575
ğŸ” Route: NPm5zoKKnHCqE8NKHfbt, name: NZ Sth Island Trail Mix
ğŸ” startCoordinate: Optional(CyaTrails.Coordinates(lng: 170.174423, lat: -43.858329))
ğŸ” routeCoordinates count: 0
ğŸ” startCoordinate values: lat=-43.858329, lng=170.174423
ğŸ” clCoordinate values: lat=-43.858329, lng=170.174423
ğŸ—ºï¸ Created 6 markers from 6 routes for HomeView map
ğŸ¬ HomeView: Easing camera to new position like EnhancedRouteMapView
ğŸ” Route zj3GELVpT8M3ghIs8UI6: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route zj3GELVpT8M3ghIs8UI6 (type: Single). Image size: (32.0, 32.0)
ğŸ” Found 1 unpaved sections to display on map for route: Test 2
ğŸ—ºï¸ Processing unpaved section 1 for route Test 2 with 75 explicit coordinates
âœ… UNPAVED: Executing addLayersAction immediately for route Test 2
âœ… UNPAVED: Executing addLayersAction for 1 features for route: Test 2
ğŸ” UNPAVED: Converting 1 GeoJSON features to 1 Turf features for route: Test 2
âœ… Source 'unpaved-source-zj3GELVpT8M3ghIs8UI6' added successfully for route: Test 2
âœ… Layer 'unpaved-layer-zj3GELVpT8M3ghIs8UI6' added successfully for route: Test 2
ğŸ—ºï¸ Added 1 unpaved sections to the map for route: Test 2
ğŸ” Route x8gtPvzh0v8lHICTMc6v: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Event, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route x8gtPvzh0v8lHICTMc6v (type: Event). Image size: (32.0, 32.0)
ğŸ” Route lSP87JlykN0waqNgD0l3: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route lSP87JlykN0waqNgD0l3 (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ” Route mPzC8y2chmMrVneOoB9o: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route mPzC8y2chmMrVneOoB9o (type: Single). Image size: (32.0, 32.0)
ğŸ” Route gmRh8B6akTWQcPG6WucU: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route gmRh8B6akTWQcPG6WucU (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ” Route NPm5zoKKnHCqE8NKHfbt: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route NPm5zoKKnHCqE8NKHfbt (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ¯ RouteTypeMarker: Assigned 6 point annotations to manager.
ğŸ¯ [TAP_SETUP] Setting up layer tap handler for layer: home-map-start-end-point-manager
ğŸ¯ [TAP_SETUP] Manager exists: MapboxMaps.PointAnnotationManager, annotations count: 6
ğŸ¯ [TAP_SETUP] Style loaded: true
ğŸ—ºï¸ Updated HomeView map with 1 styled routes. Unpaved drawn for: 1 routes.
ğŸ“± [MARKER_TAP] Calling centerCameraOnMarker with coordinate: (-41.367, 147.329)
ğŸ¯ [CAMERA_POI_STYLE] Using EXACT same approach as working POI markers
ğŸ¯ [CAMERA_POI_STYLE] Setting cameraPosition like POI markers do
ğŸ¬ [CAMERA_ASSIGNMENT] Setting camera from MARKER TAP
ğŸ¯ [CAMERA_POI_STYLE] Done - should work like POI markers
ğŸ“± [MARKER_TAP] Setting isMarkerInteraction = false to re-enable region camera changes
ğŸ¬ HomeView: Easing camera to new position like EnhancedRouteMapView
ğŸ” Route zj3GELVpT8M3ghIs8UI6: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route zj3GELVpT8M3ghIs8UI6 (type: Single). Image size: (32.0, 32.0)
ğŸ” Found 1 unpaved sections to display on map for route: Test 2
ğŸ—ºï¸ Processing unpaved section 1 for route Test 2 with 75 explicit coordinates
âœ… UNPAVED: Executing addLayersAction immediately for route Test 2
âœ… UNPAVED: Executing addLayersAction for 1 features for route: Test 2
ğŸ” UNPAVED: Converting 1 GeoJSON features to 1 Turf features for route: Test 2
âœ… Source 'unpaved-source-zj3GELVpT8M3ghIs8UI6' added successfully for route: Test 2
âœ… Layer 'unpaved-layer-zj3GELVpT8M3ghIs8UI6' added successfully for route: Test 2
ğŸ—ºï¸ Added 1 unpaved sections to the map for route: Test 2
ğŸ” Route x8gtPvzh0v8lHICTMc6v: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Event, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route x8gtPvzh0v8lHICTMc6v (type: Event). Image size: (32.0, 32.0)
ğŸ” Route lSP87JlykN0waqNgD0l3: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route lSP87JlykN0waqNgD0l3 (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ” Route mPzC8y2chmMrVneOoB9o: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Single, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route mPzC8y2chmMrVneOoB9o (type: Single). Image size: (32.0, 32.0)
ğŸ” Route gmRh8B6akTWQcPG6WucU: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route gmRh8B6akTWQcPG6WucU (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ” Route NPm5zoKKnHCqE8NKHfbt: selectedRouteId=nil, isSelected=false
ğŸ¯ Creating marker for Bikepacking, isSelected: false, iconColor: white
ğŸ¯ RouteTypeMarker: Successfully rendered image for route NPm5zoKKnHCqE8NKHfbt (type: Bikepacking). Image size: (32.0, 32.0)
ğŸ¯ RouteTypeMarker: Assigned 6 point annotations to manager.
ğŸ¯ [TAP_SETUP] Setting up layer tap handler for layer: home-map-start-end-point-manager
ğŸ¯ [TAP_SETUP] Manager exists: MapboxMaps.PointAnnotationManager, annotations count: 6
ğŸ¯ [TAP_SETUP] Style loaded: true
ğŸ—ºï¸ Updated HomeView map with 1 styled routes. Unpaved drawn for: 1 routes.