[Debug] [vite] connecting... (client, line 743)
[Debug] [vite] connected. (client, line 866)
[Log] [mapbox-gl-light] – "Using lightweight Mapbox GL for mobile" (logger.js, line 88)
[Log] [mapbox-gl-light] – "Successfully patched Map.prototype.remove" (logger.js, line 88)
[Log] [mapbox-gl-no-indoor] – "Using custom Mapbox GL without indoor plugin" (logger.js, line 88)
[Log] [mapbox-gl-no-indoor] – "Successfully patched Map.prototype.remove" (logger.js, line 88)
[Log] [mapbox-gl-adaptive] – "Desktop device detected, using full Mapbox GL" (logger.js, line 88)
[Log] [mapbox-gl-adaptive] – "Added global error handler for fetch aborts" (logger.js, line 88)
[Log] [PresentationPhotoLayer] Clearing entire photo cache (PresentationPhotoLayer.js, line 10)
[Error] Warning: Each child in a list should have a unique "key" prop.

Check the render method of `RoutePresentation`. See https://reactjs.org/link/warning-keys for more information.
Box3@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:2815:35
RoutePresentation@http://localhost:3000/src/features/presentation/components/RoutePresentation/RoutePresentation.js:27:16
RenderedRoute@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3545:11
Outlet@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3912:25
div
Styled(div)@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
Box3@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:2815:35
RenderedRoute@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3545:11
Routes@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3978:12
POIProvider@http://localhost:3000/src/features/poi/context/POIContext.js:115:11
PlaceProvider@http://localhost:3000/src/features/place/context/PlaceContext.js:9:11
PhotoProvider@http://localhost:3000/src/features/photo/context/PhotoContext.js:18:11
ProcessingProvider@http://localhost:3000/src/features/map/context/ProcessingContext.jsx:35:46
LocalizationProvider2@http://localhost:3000/node_modules/.vite/deps/chunk-TYOEL3VP.js:39:14
DefaultPropsProvider@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:3364:8
RtlProvider@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:3340:8
ThemeProvider@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:3298:12
ThemeProvider2@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:3450:12
ThemeProviderNoVars@http://localhost:3000/node_modules/.vite/deps/chunk-5QS33ZWI.js:275:20
ThemeProvider@http://localhost:3000/node_modules/.vite/deps/chunk-5QS33ZWI.js:357:8
Router@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3926:12
BrowserRouter@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:4660:12
AuthModalProvider@http://localhost:3000/src/features/auth/context/AuthModalContext.jsx:26:45
AuthProvider@http://localhost:3000/src/features/auth/context/AuthContext.js:30:15
Auth0Provider@http://localhost:3000/node_modules/.vite/deps/@auth0_auth0-react.js:1197:22
App
	printWarning (chunk-DZ4FQTDE.js:64)
	error (chunk-DZ4FQTDE.js:48)
	validateExplicitKey (chunk-DZ4FQTDE.js:724)
	validateChildKeys (chunk-DZ4FQTDE.js:737)
	jsxWithValidation (chunk-DZ4FQTDE.js:854)
	RoutePresentation (RoutePresentation.js:254)
	renderWithHooks (chunk-UJHDF6BW.js:12199)
	mountIndeterminateComponent (chunk-UJHDF6BW.js:14949)
	beginWork$1 (chunk-UJHDF6BW.js:19774)
	performUnitOfWork (chunk-UJHDF6BW.js:19219)
	workLoopSync (chunk-UJHDF6BW.js:19158)
	renderRootSync (chunk-UJHDF6BW.js:19137)
	performConcurrentWorkOnRoot (chunk-UJHDF6BW.js:18696:98)
	workLoop (chunk-UJHDF6BW.js:197)
	flushWork (chunk-UJHDF6BW.js:176)
	performWorkUntilDeadline (chunk-UJHDF6BW.js:384)
[Log] [RouteContent] – "Component mounted with route ID: 67b56367-5952-4a2a-9eb9-63ab467b5636" (logger.js, line 88)
[Error] Warning: Each child in a list should have a unique "key" prop.

Check the render method of `MapHeader`. See https://reactjs.org/link/warning-keys for more information.
Box3@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:2815:35
MapHeader@http://localhost:3000/src/features/map/components/MapHeader/MapHeader.js:16:8
div
LineProvider@http://localhost:3000/src/features/lineMarkers/context/LineContext.jsx:31:40
PresentationMapView@http://localhost:3000/src/features/presentation/components/PresentationMapView/PresentationMapView.js:38:24
RouteContent@http://localhost:3000/src/features/presentation/components/RoutePresentation/RoutePresentation.js:113:10
div
Styled(div)@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
Box3@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:2815:35
RouteProvider@http://localhost:3000/src/features/map/context/RouteContext.js:132:11
LineProvider@http://localhost:3000/src/features/lineMarkers/context/LineContext.jsx:31:40
RoutePresentation@http://localhost:3000/src/features/presentation/components/RoutePresentation/RoutePresentation.js:27:16
RenderedRoute@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3545:11
Outlet@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3912:25
div
Styled(div)@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
Box3@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:2815:35
RenderedRoute@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3545:11
Routes@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3978:12
POIProvider@http://localhost:3000/src/features/poi/context/POIContext.js:115:11
PlaceProvider@http://localhost:3000/src/features/place/context/PlaceContext.js:9:11
PhotoProvider@http://localhost:3000/src/features/photo/context/PhotoContext.js:18:11
ProcessingProvider@http://localhost:3000/src/features/map/context/ProcessingContext.jsx:35:46
LocalizationProvider2@http://localhost:3000/node_modules/.vite/deps/chunk-TYOEL3VP.js:39:14
DefaultPropsProvider@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:3364:8
RtlProvider@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:3340:8
ThemeProvider@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:3298:12
ThemeProvider2@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:3450:12
ThemeProviderNoVars@http://localhost:3000/node_modules/.vite/deps/chunk-5QS33ZWI.js:275:20
ThemeProvider@http://localhost:3000/node_modules/.vite/deps/chunk-5QS33ZWI.js:357:8
Router@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3926:12
BrowserRouter@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:4660:12
AuthModalProvider@http://localhost:3000/src/features/auth/context/AuthModalContext.jsx:26:45
AuthProvider@http://localhost:3000/src/features/auth/context/AuthContext.js:30:15
Auth0Provider@http://localhost:3000/node_modules/.vite/deps/@auth0_auth0-react.js:1197:22
App
	printWarning (chunk-DZ4FQTDE.js:64)
	error (chunk-DZ4FQTDE.js:48)
	validateExplicitKey (chunk-DZ4FQTDE.js:724)
	validateChildKeys (chunk-DZ4FQTDE.js:737)
	jsxWithValidation (chunk-DZ4FQTDE.js:854)
	MapHeader (MapHeader.js:137)
	renderWithHooks (chunk-UJHDF6BW.js:12199)
	mountIndeterminateComponent (chunk-UJHDF6BW.js:14949)
	beginWork$1 (chunk-UJHDF6BW.js:19774)
	performUnitOfWork (chunk-UJHDF6BW.js:19219)
	workLoopSync (chunk-UJHDF6BW.js:19158)
	renderRootSync (chunk-UJHDF6BW.js:19137)
	performConcurrentWorkOnRoot (chunk-UJHDF6BW.js:18696:98)
	workLoop (chunk-UJHDF6BW.js:197)
	flushWork (chunk-UJHDF6BW.js:176)
	performWorkUntilDeadline (chunk-UJHDF6BW.js:384)
[Error] Warning: React does not recognize the `customWidth` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `customwidth` instead. If you accidentally passed it from a parent component, remove it from the DOM element.
div
MuiDrawer-docked@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
Drawer2@http://localhost:3000/node_modules/.vite/deps/chunk-BM2OOZ77.js:526:32
Styled(Component)@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
ErrorBoundary@http://localhost:3000/src/components/ErrorBoundary.js:5:10
PresentationSidebar@http://localhost:3000/src/features/presentation/components/PresentationSidebar/PresentationSidebar.js:22:9
div
LineProvider@http://localhost:3000/src/features/lineMarkers/context/LineContext.jsx:31:40
PresentationMapView@http://localhost:3000/src/features/presentation/components/PresentationMapView/PresentationMapView.js:38:24
RouteContent@http://localhost:3000/src/features/presentation/components/RoutePresentation/RoutePresentation.js:113:10
div
Styled(div)@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
Box3@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:2815:35
RouteProvider@http://localhost:3000/src/features/map/context/RouteContext.js:132:11
LineProvider@http://localhost:3000/src/features/lineMarkers/context/LineContext.jsx:31:40
RoutePresentation@http://localhost:3000/src/features/presentation/components/RoutePresentation/RoutePresentation.js:27:16
RenderedRoute@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3545:11
Outlet@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3912:25
div
Styled(div)@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
Box3@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:2815:35
RenderedRoute@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3545:11
Routes@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3978:12
POIProvider@http://localhost:3000/src/features/poi/context/POIContext.js:115:11
PlaceProvider@http://localhost:3000/src/features/place/context/PlaceContext.js:9:11
PhotoProvider@http://localhost:3000/src/features/photo/context/PhotoContext.js:18:11
ProcessingProvider@http://localhost:3000/src/features/map/context/ProcessingContext.jsx:35:46
LocalizationProvider2@http://localhost:3000/node_modules/.vite/deps/chunk-TYOEL3VP.js:39:14
DefaultPropsProvider@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:3364:8
RtlProvider@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:3340:8
ThemeProvider@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:3298:12
ThemeProvider2@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:3450:12
ThemeProviderNoVars@http://localhost:3000/node_modules/.vite/deps/chunk-5QS33ZWI.js:275:20
ThemeProvider@http://localhost:3000/node_modules/.vite/deps/chunk-5QS33ZWI.js:357:8
Router@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3926:12
BrowserRouter@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:4660:12
AuthModalProvider@http://localhost:3000/src/features/auth/context/AuthModalContext.jsx:26:45
AuthProvider@http://localhost:3000/src/features/auth/context/AuthContext.js:30:15
Auth0Provider@http://localhost:3000/node_modules/.vite/deps/@auth0_auth0-react.js:1197:22
App
	printWarning (chunk-UJHDF6BW.js:521)
	error (chunk-UJHDF6BW.js:505)
	validateProperty$1 (chunk-UJHDF6BW.js:3433)
	warnUnknownProperties (chunk-UJHDF6BW.js:3465)
	validateProperties$2 (chunk-UJHDF6BW.js:3484)
	validatePropertiesInDevelopment (chunk-UJHDF6BW.js:7378)
	setInitialProperties (chunk-UJHDF6BW.js:7567)
	finalizeInitialChildren (chunk-UJHDF6BW.js:8392)
	completeWork (chunk-UJHDF6BW.js:16309)
	completeUnitOfWork (chunk-UJHDF6BW.js:19245)
	performUnitOfWork (chunk-UJHDF6BW.js:19227)
	workLoopSync (chunk-UJHDF6BW.js:19158)
	renderRootSync (chunk-UJHDF6BW.js:19137)
	performConcurrentWorkOnRoot (chunk-UJHDF6BW.js:18696:98)
	workLoop (chunk-UJHDF6BW.js:197)
	flushWork (chunk-UJHDF6BW.js:176)
	performWorkUntilDeadline (chunk-UJHDF6BW.js:384)
[Log] [PresentationMapView] ⏭️ Skipping map initialization until route data is available (PresentationMapView.js, line 486)
[Log] [PhotoContext] First few photos before adding captions: – [{url: "https://res.cloudinary.com/dig...", caption: undefined, hasCaption: false}, {url: "https://res.cloudinary.com/dig...", caption: undefined, hasCaption: false}, {url: "https://res.cloudinary.com/dig...", caption: undefined, hasCaption: false}] (3) (PhotoContext.js, line 80)
[Log] [PhotoContext] Adding photos with captions: – 200 (PhotoContext.js, line 94)
[Log] [PhotoContext] First few photos after adding captions: – [{url: "https://res.cloudinary.com/dig...", caption: "", hasCaption: true}, {url: "https://res.cloudinary.com/dig...", caption: "", hasCaption: true}, {url: "https://res.cloudinary.com/dig...", caption: "", hasCaption: true}] (3) (PhotoContext.js, line 98)
[Log] [LineContext DEBUG] – "loadLinesFromRoute function called" (logger.js, line 102)
[Log] [LineContext DEBUG] – "Provider structure: RouteProvider → LineProvider → RouteContent" (logger.js, line 102)
[Log] [LineContext DEBUG] – "Loading lines from route:" – 0 (logger.js, line 102)
[Log] [LineContext DEBUG] – "Valid lines count:" – 0 (logger.js, line 102)
[Log] [LineContext DEBUG] – "Merging 0 new lines with 0 existing lines" (logger.js, line 102)
[Log] [LineContext DEBUG] – "Lines loaded and merged successfully" (logger.js, line 102)
[Log] [RoutePresentation] Found mapOverview data in route: – {description: ""} (RoutePresentation.js, line 207)
[Log] [RouteContent] – "Component unmounting with route ID: 67b56367-5952-4a2a-9eb9-63ab467b5636" (logger.js, line 88)
[Log] [PresentationMapView] ⏭️ Skipping map initialization until route data is available (PresentationMapView.js, line 486)
[Error] Warning: validateDOMNesting(...): <div> cannot appear as a descendant of <p>.
div
div
p
MuiTypography-root@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
Typography2@http://localhost:3000/node_modules/.vite/deps/chunk-JCTSENO4.js:255:22
div
MuiListItemText-root@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
ListItemText2@http://localhost:3000/node_modules/.vite/deps/chunk-YPCEHXBV.js:528:32
div
li
MuiListItem-root@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
ListItem2@http://localhost:3000/node_modules/.vite/deps/chunk-JCTSENO4.js:4305:32
ul
MuiList-root@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
List2@http://localhost:3000/node_modules/.vite/deps/chunk-JCTSENO4.js:3725:32
div
Styled(div)@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
Box3@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:2815:35
Suspense
div
MuiPaper-root@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
Paper2@http://localhost:3000/node_modules/.vite/deps/chunk-W6H54YIZ.js:1679:32
MuiDrawer-paper@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
Transition2@http://localhost:3000/node_modules/.vite/deps/chunk-VLIOSW5J.js:122:38
Slide2@http://localhost:3000/node_modules/.vite/deps/chunk-BM2OOZ77.js:115:25
div
MuiDrawer-docked@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
Drawer2@http://localhost:3000/node_modules/.vite/deps/chunk-BM2OOZ77.js:526:32
Styled(Component)@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
ErrorBoundary@http://localhost:3000/src/components/ErrorBoundary.js:5:10
PresentationSidebar@http://localhost:3000/src/features/presentation/components/PresentationSidebar/PresentationSidebar.js:22:9
div
LineProvider@http://localhost:3000/src/features/lineMarkers/context/LineContext.jsx:31:40
PresentationMapView@http://localhost:3000/src/features/presentation/components/PresentationMapView/PresentationMapView.js:38:24
RouteContent@http://localhost:3000/src/features/presentation/components/RoutePresentation/RoutePresentation.js:113:10
div
Styled(div)@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
Box3@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:2815:35
RouteProvider@http://localhost:3000/src/features/map/context/RouteContext.js:132:11
LineProvider@http://localhost:3000/src/features/lineMarkers/context/LineContext.jsx:31:40
RoutePresentation@http://localhost:3000/src/features/presentation/components/RoutePresentation/RoutePresentation.js:27:16
RenderedRoute@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3545:11
Outlet@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3912:25
div
Styled(div)@http://localhost:3000/node_modules/.vite/deps/chunk-KN76R7PF.js:1709:49
Box3@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:2815:35
RenderedRoute@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3545:11
Routes@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3978:12
POIProvider@http://localhost:3000/src/features/poi/context/POIContext.js:115:11
PlaceProvider@http://localhost:3000/src/features/place/context/PlaceContext.js:9:11
PhotoProvider@http://localhost:3000/src/features/photo/context/PhotoContext.js:18:11
ProcessingProvider@http://localhost:3000/src/features/map/context/ProcessingContext.jsx:35:46
LocalizationProvider2@http://localhost:3000/node_modules/.vite/deps/chunk-TYOEL3VP.js:39:14
DefaultPropsProvider@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:3364:8
RtlProvider@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:3340:8
ThemeProvider@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:3298:12
ThemeProvider2@http://localhost:3000/node_modules/.vite/deps/chunk-TUYBUQCG.js:3450:12
ThemeProviderNoVars@http://localhost:3000/node_modules/.vite/deps/chunk-5QS33ZWI.js:275:20
ThemeProvider@http://localhost:3000/node_modules/.vite/deps/chunk-5QS33ZWI.js:357:8
Router@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:3926:12
BrowserRouter@http://localhost:3000/node_modules/.vite/deps/react-router-dom.js:4660:12
AuthModalProvider@http://localhost:3000/src/features/auth/context/AuthModalContext.jsx:26:45
AuthProvider@http://localhost:3000/src/features/auth/context/AuthContext.js:30:15
Auth0Provider@http://localhost:3000/node_modules/.vite/deps/@auth0_auth0-react.js:1197:22
App
	printWarning (chunk-UJHDF6BW.js:521)
	error (chunk-UJHDF6BW.js:505)
	validateDOMNesting (chunk-UJHDF6BW.js:8303)
	createInstance (chunk-UJHDF6BW.js:8375)
	completeWork (chunk-UJHDF6BW.js:16306)
	completeUnitOfWork (chunk-UJHDF6BW.js:19245)
	performUnitOfWork (chunk-UJHDF6BW.js:19227)
	workLoopSync (chunk-UJHDF6BW.js:19158)
	renderRootSync (chunk-UJHDF6BW.js:19137)
	performConcurrentWorkOnRoot (chunk-UJHDF6BW.js:18696:98)
	workLoop (chunk-UJHDF6BW.js:197)
	flushWork (chunk-UJHDF6BW.js:176)
	performWorkUntilDeadline (chunk-UJHDF6BW.js:384)
[Log] [PresentationMapView] – "Routes initialized with unified approach" (logger.js, line 88)
[Log] [PresentationMapView] ✅ Routes initialized with unified approach (PresentationMapView.js, line 127)
[Log] [PresentationMapView] ✅ Cached spatial grid for route route-0a9e297a-22a0-48c0-bd45-35bf055b4510 (PresentationMapView.js, line 165)
[Log] [MapRegistry] Map map-67b56367-5952-4a2a-9eb9-63ab467b5636 initialization status: initializing (mapRegistry.js, line 61)
[Log] [PresentationMapView] 🚀 Map initialization starting for ID: map-67b56367-5952-4a2a-9eb9-63ab467b5636 (PresentationMapView.js, line 528)
[Log] [PresentationMapView] Device is mobile: – false (PresentationMapView.js, line 542)
[Log] [PresentationMapView] Creating Mapbox instance (PresentationMapView.js, line 552)
[Debug] mapboxCreate: 15.737ms (PresentationMapView.js, line 588)
[Log] [PresentationMapView] ✅ Mapbox instance created (PresentationMapView.js, line 589)
[Log] [PresentationMapView] ✅ Map initialization flag set (PresentationMapView.js, line 791)
[Log] [MapRegistry] Cancelled initialization for map map-67b56367-5952-4a2a-9eb9-63ab467b5636 (mapRegistry.js, line 83)
[Log] [PresentationMapView] – "Skipping map cleanup in presentation mode" (logger.js, line 88)
[Warning] [PresentationMapView] – "Component unmounted during map initialization" (logger.js, line 74)
[Log] [PresentationMapView] ⚠️ Component unmounted during map initialization (PresentationMapView.js, line 820)
[Log] [PresentationMapView] ✅ Using cached spatial grid for route route-0a9e297a-22a0-48c0-bd45-35bf055b4510 (PresentationMapView.js, line 151)
[Log] [PresentationMapView] ⏭️ Map already initialized or container has existing map, skipping initialization (PresentationMapView.js, line 509)
[Log] [PresentationMapView] ✅ Routes initialized with unified approach (PresentationMapView.js, line 127)
[Log] [PresentationMapView] ✅ Using cached spatial grid for route route-0a9e297a-22a0-48c0-bd45-35bf055b4510 (PresentationMapView.js, line 151)
[Log] [MapRegistry] Map map-67b56367-5952-4a2a-9eb9-63ab467b5636 initialization status: initializing (mapRegistry.js, line 61)
[Log] [PresentationMapView] 🚀 Map initialization starting for ID: map-67b56367-5952-4a2a-9eb9-63ab467b5636 (PresentationMapView.js, line 528)
[Warning] Timer "mapInitialization-map-67b56367-5952-4a2a-9eb9-63ab467b5636" already exists (PresentationMapView.js, line 529)
[Log] [PresentationMapView] Device is mobile: – false (PresentationMapView.js, line 542)
[Log] [PresentationMapView] Creating Mapbox instance (PresentationMapView.js, line 552)
[Debug] mapboxCreate: 5.869ms (PresentationMapView.js, line 588)
[Log] [PresentationMapView] ✅ Mapbox instance created (PresentationMapView.js, line 589)
[Log] [PresentationMapView] ✅ Map initialization flag set (PresentationMapView.js, line 791)
[Log] [MapRegistry] Cancelled initialization for map map-67b56367-5952-4a2a-9eb9-63ab467b5636 (mapRegistry.js, line 83)
[Log] [PresentationMapView] ⚠️ Component unmounted during map initialization (PresentationMapView.js, line 820)
[Log] [PresentationMapView] ✅ Using cached spatial grid for route route-0a9e297a-22a0-48c0-bd45-35bf055b4510 (PresentationMapView.js, line 151)
[Log] [PresentationMapView] ⏭️ Map already initialized or container has existing map, skipping initialization (PresentationMapView.js, line 509)
[Log] [MapOverviewLoader] Using map overview data from currentRoute._loadedState: – {description: ""} (MapOverviewLoader.jsx, line 34)
[Log] [PresentationMapView] 🔄 Mapbox load event fired (PresentationMapView.js, line 632)
[Log] [PresentationMapView] – "Map loaded but component already unmounted or initialization cancelled, skipping setup" (logger.js, line 88)
[Log] [PresentationMapView] ⚠️ Component unmounted before map load setup could start (PresentationMapView.js, line 637)
[Log] [PresentationMapView] 🔄 Mapbox load event fired (PresentationMapView.js, line 632)
[Log] [PresentationMapView] ⚠️ Component unmounted before map load setup could start (PresentationMapView.js, line 637)

TERMINAL LOGS
[API] Finding and updating route with persistentId: dffbccc3-3a3b-4057-a0f3-0b280ce014a5
[API] Found route: Jacobs Ladder  with ID: dffbccc3-3a3b-4057-a0f3-0b280ce014a5
[API] Error getting UserData model: MissingSchemaError: Schema hasn't been registered for model "UserData".
Use mongoose.model(name, schema)
    at Mongoose.model (/Users/vincentmasci/Desktop/lutruwita2-next/node_modules/mongoose/lib/mongoose.js:577:13)
    at handleGetPublicRoute (file:///Users/vincentmasci/Desktop/lutruwita2-next/api/routes/public/index.js:325:27)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///Users/vincentmasci/Desktop/lutruwita2-next/api/lib/middleware.js:290:7
[API][DEBUG] Route: Jacobs Ladder , userId: google-oauth2|104387414892803104975
[API] Found user in MongoDB: Vincent Masci for route: Jacobs Ladder 
[API] Returning route data: {
  id: undefined,
  persistentId: 'dffbccc3-3a3b-4057-a0f3-0b280ce014a5',
  name: 'Jacobs Ladder ',
  routeCount: 1,
  hasMapState: true,
  createdBy: { id: 'google-oauth2|104387414892803104975', name: 'Vincent Masci' }
}
[Redis] Cache unavailable, skipping setCache operation
[Auth0][DEBUG] Auth0 module loaded
[Auth0][DEBUG] Auth0 module loaded
[Auth0][DEBUG] AUTH0_DOMAIN: dev-8jmwfh4hugvdjwh8.au.auth0.com
[Auth0][DEBUG] AUTH0_DOMAIN: dev-8jmwfh4hugvdjwh8.au.auth0.com
[DB][DEBUG] Connection attempt 1 at 2025-04-21T07:44:23.134Z
[DB][DEBUG] Current connection state: disconnected
[DB][DEBUG] Environment variables available: TERM_PROGRAM, TERM, SHELL, HOMEBREW_REPOSITORY, TMPDIR, TERM_PROGRAM_VERSION, ORIGINAL_XDG_CURRENT_DESKTOP, MallocNanoZone, USER, COMMAND_MODE, SSH_AUTH_SOCK, __CF_USER_TEXT_ENCODING, PATH, __CFBundleIdentifier, PWD, LANG, VSCODE_GIT_ASKPASS_EXTRA_ARGS, XPC_FLAGS, RBENV_SHELL, XPC_SERVICE_NAME, SHLVL, HOME, VSCODE_GIT_ASKPASS_MAIN, HOMEBREW_PREFIX, LOGNAME, VSCODE_GIT_IPC_HANDLE, VSCODE_GIT_ASKPASS_NODE, GIT_ASKPASS, INFOPATH, HOMEBREW_CELLAR, COLORTERM, _, __VERCEL_DEV_RUNNING, NODE_ENV, AWS_REGION, AWS_S3_BUCKET, CLOUDINARY_CLOUD_NAME, CLOUDINARY_URL, MONGODB_URI, AUTH0_ISSUER_BASE_URL, AUTH0_CLIENT_ID, AUTH0_AUDIENCE, AUTH0_DOMAIN, MAPBOX_TOKEN, REDIS_URL, VITE_AUTH0_CLIENT_ID, VITE_AUTH0_DOMAIN, VITE_AUTH0_REDIRECT_URI, VITE_AWS_REGION, VITE_AWS_S3_BUCKET, VITE_CLOUDINARY_CLOUD_NAME, VITE_MAPBOX_TOKEN, VITE_MONGODB_URI, NOW_REGION, VERCEL_REGION, TS_NODE_TRANSPILE_ONLY, TS_NODE_COMPILER_OPTIONS, NODE_OPTIONS
[DB][DEBUG] Checking for MongoDB URI...
[DB][DEBUG] Environment variables available: 64
[DB][DEBUG] MONGODB_URI available: true
[DB][DEBUG] MONGODB_URI length: 103
[DB][DEBUG] MONGODB_URI type: string
[DB][DEBUG] MongoDB URI found: mongodb+srv://***:***@cluster0.ibd1d.mongodb.net/photoApp?retryWrites=true&w=majority
[DB][DEBUG] MongoDB URI starts with: mongodb+sr...
[DB] Attempting connection...
[DB] Connection options: {"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"maxPoolSize":10,"minPoolSize":1,"connectTimeoutMS":10000,"heartbeatFrequencyMS":30000}
[DB][DEBUG] Calling mongoose.connect...
[DB][DEBUG] Connection attempt timestamp: 2025-04-21T07:44:23.136Z
[DB][DEBUG] Connection attempt 1 at 2025-04-21T07:44:23.135Z
[DB][DEBUG] Current connection state: disconnected
[DB][DEBUG] Environment variables available: TERM_PROGRAM, TERM, SHELL, HOMEBREW_REPOSITORY, TMPDIR, TERM_PROGRAM_VERSION, ORIGINAL_XDG_CURRENT_DESKTOP, MallocNanoZone, USER, COMMAND_MODE, SSH_AUTH_SOCK, __CF_USER_TEXT_ENCODING, PATH, __CFBundleIdentifier, PWD, LANG, VSCODE_GIT_ASKPASS_EXTRA_ARGS, XPC_FLAGS, RBENV_SHELL, XPC_SERVICE_NAME, SHLVL, HOME, VSCODE_GIT_ASKPASS_MAIN, HOMEBREW_PREFIX, LOGNAME, VSCODE_GIT_IPC_HANDLE, VSCODE_GIT_ASKPASS_NODE, GIT_ASKPASS, INFOPATH, HOMEBREW_CELLAR, COLORTERM, _, __VERCEL_DEV_RUNNING, NODE_ENV, AWS_REGION, AWS_S3_BUCKET, CLOUDINARY_CLOUD_NAME, CLOUDINARY_URL, MONGODB_URI, AUTH0_ISSUER_BASE_URL, AUTH0_CLIENT_ID, AUTH0_AUDIENCE, AUTH0_DOMAIN, MAPBOX_TOKEN, REDIS_URL, VITE_AUTH0_CLIENT_ID, VITE_AUTH0_DOMAIN, VITE_AUTH0_REDIRECT_URI, VITE_AWS_REGION, VITE_AWS_S3_BUCKET, VITE_CLOUDINARY_CLOUD_NAME, VITE_MAPBOX_TOKEN, VITE_MONGODB_URI, NOW_REGION, VERCEL_REGION, TS_NODE_TRANSPILE_ONLY, TS_NODE_COMPILER_OPTIONS, NODE_OPTIONS
[DB][DEBUG] Checking for MongoDB URI...
[DB][DEBUG] Environment variables available: 64
[DB][DEBUG] MONGODB_URI available: true
[DB][DEBUG] MONGODB_URI length: 103
[DB][DEBUG] MONGODB_URI type: string
[DB][DEBUG] MongoDB URI found: mongodb+srv://***:***@cluster0.ibd1d.mongodb.net/photoApp?retryWrites=true&w=majority
[DB][DEBUG] MongoDB URI starts with: mongodb+sr...
[DB] Attempting connection...
[DB] Connection options: {"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000,"maxPoolSize":10,"minPoolSize":1,"connectTimeoutMS":10000,"heartbeatFrequencyMS":30000}
[DB][DEBUG] Calling mongoose.connect...
[DB][DEBUG] Connection attempt timestamp: 2025-04-21T07:44:23.137Z
[DB][DEBUG] Connected to MongoDB successfully in 353ms
[DB][DEBUG] Connection state after connect: 1
[DB][DEBUG] Connection ID: 0
[DB] MongoDB server version: 8.0.8
[DB][DEBUG] Connected to MongoDB successfully in 382ms
[DB][DEBUG] Connection state after connect: 1
[DB][DEBUG] Connection ID: 0
[DB] MongoDB server version: 8.0.8
[DB] Available collections: drawnsegments, chunkeduploadchunks, maps, userdatas, chunkeduploadsessions, comments, activities, gpxFiles, pois, routes, users, photos
[DB][DEBUG] Connection attempt 1 at 2025-04-21T07:44:23.547Z
[DB][DEBUG] Using existing database connection
API Request: GET /api/routes/public/67b56367-5952-4a2a-9eb9-63ab467b5636
Path parts after filtering: [ 'api', 'routes', 'public', '67b56367-5952-4a2a-9eb9-63ab467b5636' ]
Detected persistentId from path: 67b56367-5952-4a2a-9eb9-63ab467b5636
[API] Loading public route with persistentId: 67b56367-5952-4a2a-9eb9-63ab467b5636
[API] Request URL: /api/routes/public/67b56367-5952-4a2a-9eb9-63ab467b5636?publicId=67b56367-5952-4a2a-9eb9-63ab467b5636
[API] Request headers: {
  host: 'localhost:3000',
  connection: 'close',
  'x-forwarded-host': 'localhost:3000',
  'x-forwarded-proto': 'http',
  'x-forwarded-port': '3000',
  'x-forwarded-for': '::1',
  'x-vercel-id': 'dev1::dev1::3n4io-1745221463128-0485c04300f3',
  'x-vercel-forwarded-for': '::1',
  'x-vercel-deployment-url': 'localhost:3000',
  'x-real-ip': '::1',
  'accept-encoding': 'gzip, deflate',
  priority: 'u=3, i',
  'accept-language': 'en-AU,en;q=0.9',
  'sec-fetch-dest': 'empty',
  referer: 'http://localhost:3000/preview/route/67b56367-5952-4a2a-9eb9-63ab467b5636',
  'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.4 Safari/605.1.15',
  'sec-fetch-mode': 'cors',
  'if-none-match': 'W/"1928f4-ZlnphGJiFUwCANq1sjw1hExutaY"',
  'sec-fetch-site': 'same-origin',
  accept: 'application/json'
}
[API] Clearing cache for key: public-route:67b56367-5952-4a2a-9eb9-63ab467b5636
Connected to Redis
[Redis] Client not ready (status: connecting), skipping setCache operation
[API] Fetching fresh data from database...
[Redis Error] Error: getaddrinfo ENOTFOUND harmless-crappie-19868.upstash.io
    at GetAddrInfoReqWrap.onlookup [as oncomplete] (node:dns:109:26) {
  errno: -3008,
  code: 'ENOTFOUND',
  syscall: 'getaddrinfo',
  hostname: 'harmless-crappie-19868.upstash.io'
}
[Redis] Marking Redis as unavailable due to error: getaddrinfo ENOTFOUND harmless-crappie-19868.upstash.io
[DB] Available collections: drawnsegments, chunkeduploadchunks, maps, userdatas, chunkeduploadsessions, comments, activities, gpxFiles, pois, routes, users, photos
[DB][DEBUG] Connection attempt 1 at 2025-04-21T07:44:23.568Z
[DB][DEBUG] Using existing database connection
API Request: GET /api/routes/public/67b56367-5952-4a2a-9eb9-63ab467b5636
Path parts after filtering: [ 'api', 'routes', 'public', '67b56367-5952-4a2a-9eb9-63ab467b5636' ]
Detected persistentId from path: 67b56367-5952-4a2a-9eb9-63ab467b5636
[API] Loading public route with persistentId: 67b56367-5952-4a2a-9eb9-63ab467b5636
[API] Request URL: /api/routes/public/67b56367-5952-4a2a-9eb9-63ab467b5636?publicId=67b56367-5952-4a2a-9eb9-63ab467b5636
[API] Request headers: {
  host: 'localhost:3000',
  connection: 'close',
  'x-forwarded-host': 'localhost:3000',
  'x-forwarded-proto': 'http',
  'x-forwarded-port': '3000',
  'x-forwarded-for': '::1',
  'x-vercel-id': 'dev1::dev1::3n4io-1745221463128-da65b8d8b6ba',
  'x-vercel-forwarded-for': '::1',
  'x-vercel-deployment-url': 'localhost:3000',
  'x-real-ip': '::1',
  'accept-encoding': 'gzip, deflate',
  priority: 'u=3, i',
  'accept-language': 'en-AU,en;q=0.9',
  'sec-fetch-dest': 'empty',
  referer: 'http://localhost:3000/preview/route/67b56367-5952-4a2a-9eb9-63ab467b5636',
  'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.4 Safari/605.1.15',
  'sec-fetch-mode': 'cors',
  'if-none-match': 'W/"1928f4-ZlnphGJiFUwCANq1sjw1hExutaY"',
  'sec-fetch-site': 'same-origin',
  accept: 'application/json'
}
[API] Clearing cache for key: public-route:67b56367-5952-4a2a-9eb9-63ab467b5636
Connected to Redis
[Redis] Client not ready (status: connecting), skipping setCache operation
[API] Fetching fresh data from database...
[Redis Error] Error: getaddrinfo ENOTFOUND harmless-crappie-19868.upstash.io
    at GetAddrInfoReqWrap.onlookup [as oncomplete] (node:dns:109:26) {
  errno: -3008,
  code: 'ENOTFOUND',
  syscall: 'getaddrinfo',
  hostname: 'harmless-crappie-19868.upstash.io'
}
[Redis] Marking Redis as unavailable due to error: getaddrinfo ENOTFOUND harmless-crappie-19868.upstash.io
[API] Available collections: [
  'drawnsegments',
  'chunkeduploadchunks',
  'maps',
  'userdatas',
  'chunkeduploadsessions',
  'comments',
  'activities',
  'gpxFiles',
  'pois',
  'routes',
  'users',
  'photos'
]
[API] Available collections: [
  'drawnsegments',
  'chunkeduploadchunks',
  'maps',
  'userdatas',
  'chunkeduploadsessions',
  'comments',
  'activities',
  'gpxFiles',
  'pois',
  'routes',
  'users',
  'photos'
]
[API] Total routes in database: 12
[API] Total routes in database: 12
[API] Total public routes in database: 10
[API] Total public routes in database: 10
[API] Public routes: [
  {
    id: '67b56367-5952-4a2a-9eb9-63ab467b5636',
    name: 'The Lutruwita Way'
  },
  {
    id: '20fb6356-ef11-4ade-b271-e786bf2b2235',
    name: 'Gariwerd Explorer (Grampians NP)'
  },
  {
    id: '2752cd6e-4bed-4b5d-89be-308771efd2a2',
    name: 'Avenel to Kepps'
  },
  { id: 'b0ec1e2b-63b0-4ab6-8882-50a6f79d90d1', name: 'Pyrenees 280' },
  {
    id: 'dffbccc3-3a3b-4057-a0f3-0b280ce014a5',
    name: 'Jacobs Ladder '
  },
  {
    id: '9b3f89da-cb77-44ac-8ba9-5d69198e2e92',
    name: 'Falls Creek Gravel Routes '
  },
  {
    id: '9661a12f-a376-4d6d-84b5-bd40a8e6719e',
    name: 'Gembrook Explorer & Dandenong Gravel '
  },
  {
    id: '277c5a5f-b256-4f38-ad3e-168906ae97d6',
    name: 'The Otway Rip '
  },
  {
    id: '89e3f711-f482-43d3-9b84-9e53dc254fb8',
    name: 'Fools Gold 420'
  },
  { id: '791d038e-3b12-4d91-9a41-58b7fd606741', name: 'Test' }
]
[API] Finding and updating route with persistentId: 67b56367-5952-4a2a-9eb9-63ab467b5636
[API] Public routes: [
  {
    id: '67b56367-5952-4a2a-9eb9-63ab467b5636',
    name: 'The Lutruwita Way'
  },
  {
    id: '20fb6356-ef11-4ade-b271-e786bf2b2235',
    name: 'Gariwerd Explorer (Grampians NP)'
  },
  {
    id: '2752cd6e-4bed-4b5d-89be-308771efd2a2',
    name: 'Avenel to Kepps'
  },
  { id: 'b0ec1e2b-63b0-4ab6-8882-50a6f79d90d1', name: 'Pyrenees 280' },
  {
    id: 'dffbccc3-3a3b-4057-a0f3-0b280ce014a5',
    name: 'Jacobs Ladder '
  },
  {
    id: '9b3f89da-cb77-44ac-8ba9-5d69198e2e92',
    name: 'Falls Creek Gravel Routes '
  },
  {
    id: '9661a12f-a376-4d6d-84b5-bd40a8e6719e',
    name: 'Gembrook Explorer & Dandenong Gravel '
  },
  {
    id: '277c5a5f-b256-4f38-ad3e-168906ae97d6',
    name: 'The Otway Rip '
  },
  {
    id: '89e3f711-f482-43d3-9b84-9e53dc254fb8',
    name: 'Fools Gold 420'
  },
  { id: '791d038e-3b12-4d91-9a41-58b7fd606741', name: 'Test' }
]
[API] Finding and updating route with persistentId: 67b56367-5952-4a2a-9eb9-63ab467b5636
[API] Found route: The Lutruwita Way with ID: 67b56367-5952-4a2a-9eb9-63ab467b5636
[API] Error getting UserData model: MissingSchemaError: Schema hasn't been registered for model "UserData".
Use mongoose.model(name, schema)
    at Mongoose.model (/Users/vincentmasci/Desktop/lutruwita2-next/node_modules/mongoose/lib/mongoose.js:577:13)
    at handleGetPublicRoute (file:///Users/vincentmasci/Desktop/lutruwita2-next/api/routes/public/index.js:325:27)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///Users/vincentmasci/Desktop/lutruwita2-next/api/lib/middleware.js:290:7
[API][DEBUG] Route: The Lutruwita Way, userId: google-oauth2|104387414892803104975
[API] Found user in MongoDB: Vincent Masci for route: The Lutruwita Way
[API] Returning route data: {
  id: undefined,
  persistentId: '67b56367-5952-4a2a-9eb9-63ab467b5636',
  name: 'The Lutruwita Way',
  routeCount: 11,
  hasMapState: true,
  createdBy: { id: 'google-oauth2|104387414892803104975', name: 'Vincent Masci' }
}
[Redis] Cache unavailable, skipping setCache operation
[API] Found route: The Lutruwita Way with ID: 67b56367-5952-4a2a-9eb9-63ab467b5636
[API] Error getting UserData model: MissingSchemaError: Schema hasn't been registered for model "UserData".
Use mongoose.model(name, schema)
    at Mongoose.model (/Users/vincentmasci/Desktop/lutruwita2-next/node_modules/mongoose/lib/mongoose.js:577:13)
    at handleGetPublicRoute (file:///Users/vincentmasci/Desktop/lutruwita2-next/api/routes/public/index.js:325:27)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async file:///Users/vincentmasci/Desktop/lutruwita2-next/api/lib/middleware.js:290:7
[API][DEBUG] Route: The Lutruwita Way, userId: google-oauth2|104387414892803104975
[API] Found user in MongoDB: Vincent Masci for route: The Lutruwita Way
[API] Returning route data: {
  id: undefined,
  persistentId: '67b56367-5952-4a2a-9eb9-63ab467b5636',
  name: 'The Lutruwita Way',
  routeCount: 11,
  hasMapState: true,
  createdBy: { id: 'google-oauth2|104387414892803104975', name: 'Vincent Masci' }
}
[Redis] Cache unavailable, skipping setCache operation
